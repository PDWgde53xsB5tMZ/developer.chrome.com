// Importing required modules for the test suite
const test = require('ava'); // A test runner for Node.js
const {html} = require('common-tags'); // A module for creating multiline HTML strings
const cheerio = require('cheerio'); // A server-side implementation of jQuery

// Importing the Video component from the specified path
const {Video} = require('../../../site/_shortcodes/Video');

// The first test case checks if the Video shortcode generates the correct video HTML
test('Video shortcode generates video html', t => {
  // The path to the video file
  const path = 'video/tcFciHGuF3MxnTr1y5ue01OGLBn2/1601081394086.mp4';

  // Loading the HTML generated by the Video shortcode
  const parsed = cheerio.load(Video({src: path}));

  // Creating the expected HTML string using the html tag from common-tags
  const expected = cheerio.load(
    html`
      <video controls>
        <source
          src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/1601081394086.mp4"
          type="video/mp4"
        />
      </video>
    `
  );

  // Comparing the parsed HTML with the expected HTML
  t.deepEqual(parsed('video').html().trim(), expected('video').html().trim());
});

// The second test case checks if the Video shortcode generates multiple source elements when provided
test('video shortcode generates multiple sources when provided', t => {
  // An array of paths to the video files
  const paths = [
    'video/tcFciHGuF3MxnTr1y5ue01OGLBn2/1601081394086.mp4',
    'video/tcFciHGuF3MxnTr1y5ue01OGLBn2/1601081394086.mov',
    'video/tcFciHGuF3MxnTr1y5ue01OGLBn2/1601081394086.webm',
  ];

  // Loading the HTML generated by the Video shortcode
  const parsed = cheerio.load(Video({src: paths}));

  // Creating the expected HTML string using the html tag from common-tags
  const expected = cheerio.load(
    html`
      <video controls>
        <source
          src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/1601081394086.mp4"
          type="video/mp4"
        />
        <source
          src="https://storage.googleapis.com/web-dev-uploads/video/tcFciHGuF3MxnTr1y5ue01OGLBn2/160108
